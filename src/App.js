import axios from 'axios';
import { useEffect, useState } from 'react';
import './App.css';
import ReactAnimatedWeather from 'react-animated-weather';

function App() {
  
  const [weatherData, setWeatherData] = useState({})
  const [location, setLocation] = useState('')
 
  const url = `https://api.openweathermap.org/data/2.5/weather?q=${location}&appid=ac8acdcc7b454605852bbbf51b827db8&units=metric`

  const searchLocation = (event) => {
    if (event.key === 'Enter'){
      axios.get(url).then((response) => {
        setWeatherData(response.data)
        console.log(response.data)
      })
      setLocation('') 
    }
  }

// GETTING THE DATE
  const d = new Date()
  const days = ['Sunday', 'Monday', 'Tuesday', 'Wednsday', 'Thursday', 'Friday', 'Saturday']
  let months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November',
    'December'];
  const date = d.getDate()
  const year = d.getFullYear()
  const day = days[d.getDay()]
  const month = months[d.getMonth()]
  const hour = d.getHours()
  const minute = d.getMinutes()

//  GETTING THE WEATHER ICONS FROM THE API USING ITS KEY
  const codeMapping = {
    "01d": "CLEAR_DAY",
    "01n": "CLEAR_NIGHT",
    "02d": "PARTLY_CLOUDY_DAY",
    "02n": "PARTLY_CLOUDY_NIGHT",
    "03d": "CLOUDY",
    "03n": "CLOUDY",
    "04d": "PARTLY_CLOUDY_DAY",
    "04n": "PARTLY_CLOUDY_NIGHT",
    "09d": "SLEET",
    "09n": "SLEET",
    "10d": "RAIN",
    "10n": "RAIN",
    "11d": "SLEET",
    "11n": "SLEET",
    "13d": "SNOW",
    "13n": "SNOW",
    "50d": "FOG",
    "50n": "FOG",
  }
  
// THE USER INTEFACE
  return (
    <div className='body'>

      {/* Header Nav */}
      <div>
        {/* input that is search bar */}
        <div className="search">
          <input
            value={location}
            onChange={event => setLocation(event.target.value)}
            placeholder='Enter Location'
            onKeyPress={searchLocation} 
            type="text" />
        </div>
        <div className='head-b'>
          {/* <p className='degree'>{weatherData.main.temp.toFixed()}Â°c</p> */}
          <p>{weatherData.name}</p>  <br />
          <p className='degree'>{weatherData.main ?  weatherData.main.temp.toFixed()  : null }Â°c </p>
        </div>
      </div>

      {/* main body */}
      {(typeof weatherData.main != 'undefined') ? (
        <div className="main">
          <div className="current">
            <h2>{weatherData.weather[0].main}</h2>
            <div className='icon'>
              <ReactAnimatedWeather
                icon={codeMapping[weatherData.weather[0].icon]}
                color='white'
                size='100'
                animate= {true}
                className='pic'
              />
            </div>
            
            {/* adding the date */}
            <div className="dates">
              <p>{day}</p>
              <p>{`${date} ${month} ${year}`}</p>
              <p>{`${hour}:${minute}`}</p>
            </div>          
          </div>

          {/* Gettign the forcast */}
          <div className="forcast">
          <div className='f'>
            <h2>Weather Condition</h2>
            <div className="result">
              <div>
                {/* <img src="./pressure2.1.svg" alt="" className='pressure'/> */}
                <svg width="51" height="51" viewBox="0 0 512 478" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <g id="Group">
                  <path id="Vector" d="M170.667 196.333C109.227 196.333 59.734 245.826 59.734 307.266C59.734 368.706 109.227 418.2 170.667 418.2C232.107 418.2 281.6 368.707 281.6 307.267C281.6 245.827 232.107 196.333 170.667 196.333ZM264.148 298.733H203.713C202.905 295.623 201.661 292.686 200.06 289.982L242.895 247.147C254.721 261.362 262.404 279.159 264.148 298.733ZM170.667 324.333C161.28 324.333 153.6 316.653 153.6 307.266C153.6 297.879 161.28 290.199 170.667 290.199C180.054 290.199 187.734 297.879 187.734 307.266C187.734 316.653 180.053 324.333 170.667 324.333ZM188.003 277.903C185.285 276.288 182.33 275.034 179.2 274.221V213.786C198.795 215.531 216.607 223.229 230.83 235.077L188.003 277.903ZM162.133 274.221C159.023 275.029 156.085 276.274 153.381 277.875L110.546 235.04C124.761 223.213 142.558 215.529 162.133 213.786V274.221ZM153.331 336.63C156.049 338.245 159.004 339.499 162.134 340.312V400.747C142.539 399.002 124.726 391.304 110.504 379.456L153.331 336.63ZM179.2 340.312C182.311 339.504 185.25 338.259 187.956 336.657L230.79 379.491C216.574 391.32 198.777 399.004 179.2 400.748V340.312ZM98.475 247.104L141.302 289.931C139.687 292.649 138.433 295.604 137.62 298.732H77.185C78.931 279.139 86.628 261.327 98.475 247.104ZM77.185 315.8H137.62C138.428 318.91 139.672 321.847 141.273 324.551L98.438 367.386C86.612 353.171 78.929 335.375 77.185 315.8ZM242.86 367.426L200.032 324.598C201.646 321.881 202.899 318.927 203.712 315.8H264.147C262.402 335.393 254.706 353.204 242.86 367.426Z" fill="white"/>
                  <path id="Vector_2" d="M512 85.4C512 38.467 473.6 0.0669861 426.667 0.0669861C379.734 0.0669861 341.334 38.467 341.334 85.4C341.334 129.454 375.168 165.986 418.134 170.303V273.133C418.134 331.794 375.284 380.929 319.34 390.792C333.327 366.063 341.334 337.556 341.334 307.266C341.334 213.399 264.534 136.599 170.667 136.599C76.8 136.599 0 213.4 0 307.267C0 401.134 76.8 477.934 170.667 477.934C226.319 477.934 275.97 450.936 307.175 409.392C378.345 404.96 435.2 345.369 435.2 273.133V170.303C478.166 165.986 512 129.454 512 85.4ZM170.667 460.867C86.187 460.867 17.067 391.747 17.067 307.267C17.067 222.787 86.187 153.667 170.667 153.667C255.147 153.667 324.267 222.787 324.267 307.267C324.267 391.747 255.147 460.867 170.667 460.867ZM435.2 153.11V136.6C435.2 131.48 431.787 128.067 426.667 128.067C421.547 128.067 418.134 131.48 418.134 136.6V153.11C387.378 149.228 362.839 124.689 358.957 93.933H375.467C380.587 93.933 384 90.52 384 85.4C384 80.28 380.587 76.867 375.467 76.867H358.957C362.839 46.111 387.378 21.572 418.134 17.69V34.2C418.134 39.32 421.547 42.733 426.667 42.733C431.787 42.733 435.2 39.32 435.2 34.2V17.69C465.956 21.572 490.495 46.111 494.377 76.867H477.867C472.747 76.867 469.334 80.28 469.334 85.4C469.334 90.52 472.747 93.933 477.867 93.933H494.377C490.495 124.69 465.956 149.228 435.2 153.11Z" fill="white"/>
                  <path id="Vector_3" d="M466.773 45.293C463.36 41.88 458.24 41.88 454.826 45.293L437.878 62.241C434.52 60.671 430.727 59.8 426.666 59.8C412.159 59.8 401.066 70.893 401.066 85.4C401.066 99.907 412.159 111 426.666 111C441.173 111 452.266 99.907 452.266 85.4C452.266 81.339 451.395 77.545 449.825 74.188L466.773 57.24C470.187 53.827 470.187 48.707 466.773 45.293ZM426.667 93.933C421.547 93.933 418.134 90.52 418.134 85.4C418.134 80.28 421.547 76.867 426.667 76.867C431.787 76.867 435.2 80.28 435.2 85.4C435.2 90.52 431.787 93.933 426.667 93.933Z" fill="white"/>
                  </g>
                </svg>
                <p>Pressure: <br /> {weatherData.main.pressure}</p>
              </div>
              <div>
                <img src="./humidity1.svg" alt="" />
                <p>Humidity: <br /> {weatherData.main.humidity}%</p>
              </div>
              <div>
                {/* <img src="./wind.svg" alt="" /> */}
                <svg width="48" height="48" viewBox="0 0 48 45" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <g id="Group1">
                  <path id="wind_5" d="M44.7315 29.3634L41.731 26.3433C41.5441 26.1662 41.2981 26.058 41.0325 26.058C40.7669 26.058 40.521 26.1564 40.3341 26.3433L38.3075 28.3796C37.9239 28.7633 37.9239 29.3831 38.3075 29.7667C38.6912 30.1504 39.311 30.1504 39.6946 29.7667L41.0227 28.4288L42.6361 30.052L40.6095 32.0884H12.9266C12.661 32.0884 12.415 32.1868 12.2281 32.3737L9.22764 35.3938C8.84398 35.7775 8.84398 36.3973 9.22764 36.7809L12.2281 39.8011C12.415 39.9782 12.661 40.0864 12.9266 40.0864H36.5466L37.5795 41.1291L36.2711 42.3982C35.8875 42.772 35.8776 43.3918 36.2515 43.7853C36.4482 43.982 36.704 44.0804 36.9598 44.0804C37.2057 44.0804 37.4517 43.9919 37.6582 43.8148L39.6848 41.8473C39.8717 41.6604 39.9799 41.4144 39.9799 41.1488C39.9799 40.893 39.8815 40.6373 39.6946 40.4504L37.6681 38.414C37.4812 38.2369 37.2352 38.1287 36.9696 38.1287H13.3496L11.323 36.0923L13.3496 34.0559H41.0325C41.2981 34.0559 41.5441 33.9576 41.731 33.7706L44.7315 30.7505C45.1151 30.3668 45.1151 29.7472 44.7315 29.3634Z" fill="white"/>
                  <path id="wind_4" d="M47.7123 35.3742L45.6857 33.3379C45.3021 32.9542 44.6823 32.9542 44.2986 33.3379C43.9149 33.7215 43.9149 34.3413 44.2986 34.725L45.6365 36.0727L44.2986 37.4205C43.9149 37.8041 43.9149 38.4239 44.2986 38.8076C44.4954 38.9945 44.7413 39.0928 44.9971 39.0928C45.2529 39.0928 45.4988 39.0043 45.6857 38.7977L47.7123 36.7613C48.0959 36.3777 48.0959 35.7579 47.7123 35.3742Z" fill="white"/>
                  <path id="wind_3" d="M27.9486 28.9798C30.3588 28.9798 32.6214 28.0551 34.3233 26.363C36.035 24.6709 36.9696 22.4083 36.9696 19.9883C36.9696 15.0006 32.9165 10.9278 27.9486 10.9278C27.1714 10.9278 26.3745 11.0459 25.5384 11.3017C23.5118 7.37648 19.4489 4.88757 14.963 4.88757C8.33243 4.88757 2.94144 10.3081 2.94144 16.9681C2.94144 18.7782 3.34478 20.49 4.06292 22.0246H0.983758C0.442691 22.0246 0 22.4673 0 23.0084C0 23.5495 0.442691 23.9922 0.983758 23.9922H5.20408C7.38802 27.0123 10.9492 28.9798 14.9531 28.9798H27.9486V28.9798ZM14.6678 19.2995L11.6674 16.2794C11.2837 15.8957 10.6738 15.8957 10.2901 16.2696L8.26357 18.2371C7.87006 18.6109 7.86022 19.2405 8.24389 19.6242C8.61772 20.0177 9.24732 20.0275 9.63099 19.6438L10.9591 18.3551L12.5921 19.998L10.5656 22.0344H6.26654C5.39099 20.5489 4.89911 18.8175 4.89911 16.9779C4.89911 11.4 9.41456 6.86483 14.9531 6.86483C18.957 6.86483 22.5576 9.23569 24.1119 12.9051C24.3185 13.397 24.8792 13.6331 25.3711 13.4363C26.3057 13.0723 27.1517 12.8953 27.9486 12.8953C31.8344 12.8953 35.0021 16.0826 35.0021 19.9882C35.0021 23.8642 31.8344 27.0122 27.9486 27.0122H14.9531C12.1396 27.0122 9.60148 25.8612 7.77169 23.9921H10.9689C11.2345 23.9921 11.4805 23.8838 11.6674 23.7068L14.6678 20.6866C15.0515 20.303 15.0515 19.6832 14.6678 19.2995Z" fill="white"/>
                  <path id="wind_2" d="M40.157 11.3804C40.3341 11.7247 40.6784 11.9214 41.0325 11.9214C41.1801 11.9214 41.3375 11.8821 41.4752 11.8132L43.0099 11.0262V12.9347C43.0099 13.4758 43.4526 13.9185 43.9937 13.9185C44.5347 13.9185 44.9774 13.4758 44.9774 12.9347V11.0262L46.5121 11.8132C46.6596 11.8821 46.8072 11.9214 46.9548 11.9214C47.3089 11.9214 47.6631 11.7247 47.8303 11.3804C48.0762 10.8983 47.8795 10.3081 47.3975 10.0621L46.1579 9.43253L47.3975 8.80292C47.8795 8.55698 48.0762 7.96673 47.8303 7.48469C47.5844 7.00265 46.9941 6.80589 46.5121 7.05183L44.9774 7.83884V5.93035C44.9774 5.38929 44.5347 4.94659 43.9937 4.94659C43.4526 4.94659 43.0099 5.38929 43.0099 5.93035V7.83884L41.4752 7.05183C40.9932 6.80589 40.4029 7.00265 40.157 7.48469C39.9111 7.96673 40.1078 8.55698 40.5899 8.80292L41.8294 9.43253L40.5899 10.0621C40.1078 10.3081 39.9111 10.8983 40.157 11.3804Z" fill="white"/>
                  <path id="wind" d="M29.1094 7.31404C29.2865 7.65836 29.6308 7.85511 29.9849 7.85511C30.1325 7.85511 30.2801 7.8256 30.4276 7.7469L32.0016 6.95005V8.82903C32.0016 9.3701 32.4443 9.81279 32.9854 9.81279C33.5265 9.81279 33.9692 9.3701 33.9692 8.82903V6.95989L35.5432 7.75673C35.6809 7.8256 35.8383 7.86495 35.9859 7.86495C36.3498 7.86495 36.6942 7.6682 36.8614 7.32388C37.1073 6.832 36.9106 6.24175 36.4285 5.99581L35.1693 5.3662L36.4285 4.7366C36.9106 4.49066 37.1073 3.90041 36.8614 3.41836C36.6155 2.93632 36.0252 2.73957 35.5432 2.98551L33.9692 3.78236V1.90337C33.9692 1.36231 33.5265 0.919617 32.9854 0.919617C32.4443 0.919617 32.0016 1.36231 32.0016 1.90337V3.78236L30.4276 2.98551C29.9456 2.73957 29.3553 2.93632 29.1094 3.41836C28.8635 3.90041 29.0602 4.49066 29.5422 4.7366L30.8015 5.3662L29.5422 5.99581C29.0602 6.24175 28.8635 6.832 29.1094 7.31404Z" fill="white"/>
                  </g>
                </svg>
                <p>Wind Speed: <br /> {weatherData.wind.speed}Km/h</p>
              </div>
              <div>
                {/* <img src="./humidity1.svg" alt="" /> */}
                <svg width="48" height="48" viewBox="0 0 175 165" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <g id="gust">
                  <path id="second-bar" d="M171.159 103.757C171.159 101.788 169.562 100.191 167.593 100.191H17.829C17.536 100.191 17.274 100.291 17.001 100.358C16.728 100.291 16.467 100.191 16.173 100.191C11.188 100.191 7.132 95.392 7.132 89.494C7.132 83.596 11.189 78.797 16.173 78.797C18.142 78.797 19.739 77.2 19.739 75.231C19.739 73.262 18.142 71.665 16.173 71.665C7.255 71.665 0 79.664 0 89.494C0 99.324 7.255 107.323 16.173 107.323C16.466 107.323 16.728 107.223 17.001 107.156C17.274 107.223 17.536 107.323 17.829 107.323H167.593C169.562 107.323 171.159 105.726 171.159 103.757Z" fill="white"/>
                  <path id="circle" d="M89.145 57.402C104.874 57.402 117.671 44.605 117.671 28.876C117.671 13.147 104.874 0.348999 89.145 0.348999C74.626 0.348999 62.63 11.261 60.866 25.31H60.618V32.442H60.866C62.63 46.49 74.626 57.402 89.145 57.402ZM89.145 7.48C99.725 7.48 108.512 15.207 110.218 25.309H68.072C69.778 15.207 78.565 7.48 89.145 7.48ZM110.217 32.441C108.512 42.543 99.726 50.27 89.145 50.27C78.565 50.27 69.778 42.543 68.072 32.441H110.217Z" fill="white"/>
                  <path id="third-bar" d="M146.198 118.02C146.198 116.051 144.601 114.454 142.632 114.454H35.658C33.689 114.454 32.092 116.051 32.092 118.02C32.092 119.989 33.689 121.586 35.658 121.586H142.632C144.601 121.586 146.198 119.989 146.198 118.02Z" fill="white"/>
                  <path id="top-bar" d="M35.658 93.06H142.632C144.601 93.06 146.198 91.463 146.198 89.494C146.198 87.525 144.601 85.928 142.632 85.928H35.658C33.689 85.928 32.092 87.525 32.092 89.494C32.092 91.463 33.689 93.06 35.658 93.06Z" fill="white"/>
                  <path id="bottom" d="M158.552 128.718C158.259 128.718 157.997 128.818 157.724 128.885C157.451 128.818 157.189 128.718 156.896 128.718H55.27C53.301 128.718 51.704 130.315 51.704 132.284C51.704 134.253 53.301 135.85 55.27 135.85H156.896C157.189 135.85 157.451 135.75 157.724 135.683C157.997 135.75 158.258 135.85 158.552 135.85C163.537 135.85 167.593 140.648 167.593 146.547C167.593 152.446 163.536 157.244 158.552 157.244C156.583 157.244 154.986 158.841 154.986 160.81C154.986 162.779 156.583 164.376 158.552 164.376C167.47 164.376 174.725 156.377 174.725 146.547C174.725 136.717 167.469 128.718 158.552 128.718Z" fill="white"/>
                  </g>
                </svg>

                <p>Wind Gust: <br /> {weatherData.wind.gust}</p>
              </div>
            </div>
          </div>
          </div>
        </div>
      ) : ('')}

      {/* Creating the footer */}

      <footer>
        <div className='foot'>
          Created By Omitirab Israel(IzZy) ðŸ˜‰ with &#9760; ðŸ‘¿ intentions
        </div>
      </footer>
    </div>
  );
}

export default App;
